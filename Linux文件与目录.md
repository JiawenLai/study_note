#### 一、Linux文件权限

##### 1. Linux文件属性

![image-20221008202431406](/Users/berry/Library/Application Support/typora-user-images/image-20221008202431406.png)

1.1 第一部分为文件的类型与权限：

- 第一个字符为文件类型：[d]表示目录、[-]表示文件、[l]表示链接文件、[b]表示设备文件里面的可供存储的周边设备、[c]表示设备文件里的序列埠设备；
- 后面的字符三个为一组，第一组为文件拥有者可具备的权限，第二组为加入此群组的账号的权限，第三组为非本人且没有加入本群组的其他账号的权限，每一组的第一个字符表示是否可读[r]，每一组的第二个字符表示是否可写[w]，每一组的第三个字符表示是否可执行[x]；

1.2 第二部分表示有多少文件名链接到此节点；

1.3 第三部分表示这个文件或目录的拥有者账号；

1.4 第四部分表示这个文件的所属群组；

1.5 第五部分表示这个文件的容量大小，单位为Bytes；

1.6 第六部分为这个文件的创建日期或最近的修改日期，如果未变动时间太久则只显示年份；

1.7 第七部分为这个文件的文件名，文件名前有一个[.]为隐藏文件；

##### 2. 修改文件属性与权限

2.1 改变所属群组，chgrp

```bash
chgrp user1 test.txt #第二个字段为群组名，需在etc/group文件中，最后一个字段为文件名
```

2.2 改变文件拥有者，chown

```bash
chown user1 test.txt #第二个字段为用户名，需在etc/passwd文件中，最后一个字段为文件名
```

```bash
chown user1:user1 text.txt #同时改变群组
chown user1.user1 text.txt
```

```bash
chown .user1 text.txt #只改群组
chown :user1 text.txt
```

-R：进行递回的持续变更，亦即连同次目录下的所有文件都变更。

2.3 改变权限，chmod

- 数字类型改变文件权限，r对应为4，w对应为2，x对应为1

```bash
chmod 777 test.txt #第二个字段中的每个数字对应为owner/group/other各自的rwx的累加，后面接文件名
```

- 符号类型改变文件权限，user对u，group对应g，other对应o，a对应all所有身份，可以使用+、-、=来操作权限rwx

```bash
chmod u=rwx,go=rx text.txt #第二个字段设置权限，后接文件名
chmod a+x test.txt
chmod a-x test.txt
```

##### 3. 目录与文件的权限

3.1 文件的权限

- r权限表示可读取该文件的实际内容；
- w权限表示可以编辑、新增或修改该文件的内容；
- x权限表示可以该文件具有可以被执行的权限；

3.2 目录的权限

- r表示具有查询该目录下的文件名数据的权限；
- w表示具有变动该目录结构清单的权限，包括创建、删除、更名、移动；
- x表示使用者能否进入该目录的权限；

##### 4. Linux文件种类与扩展名

4.1 文件种类

- 正规文件（regular file）：用[-]表示，包括纯文本文件（ASCLL）、二进制文件（binary）、数据格式文件（data）；
- 目录（directory）：用[d]表示；
- 链接文件（link）：用[l]表示；
- 设备与设备文件（device）：通常集中在/dev目录下，分为区块（block）设备文件（用[b]表示，随机存取的周边设备，如硬盘）和字符（character）设备文件（用[c]表示，一次性读取的周边设备，如键盘）；
- 数据接口文件（sockets）：用[s]表示，一般在/run和/tmp目录中出现；
- 数据输送档（FIFO，pipe）：用[p]表示，first-in-first-out缩写，用于解决多个程序同时存取一个文件所造成的错误问题；

4.2 文件扩展名

- .sh：脚本或批处理文件（script）；
- Z、.tar、.tar.gz、.zip、.tgz：经过打包的压缩文件；
- .html、.php：网页相关文件；
- linux文件是否可执行只取决于是否拥有x权限，文件扩展名仅用于了解文件的可能用途；

4.3 文件长度限制

- 单一文件或目录的最大容许文件名为255Bytes，以一个ASCLL英文占用一个Bytes来说可有大约255个字符长度，以一个中文占用2Bytes来说可有大约128个中文字符；

4.4 文件名称限制

- 文件名称避免使用*？<>;&![]|'"'(){}\等；

#### 二、Linux目录配置

##### 1. Linux目录配置依据

- Filesystem Hierarchy Standard（FHS）；

##### 2. 目录树

- 目录树起始点为根目录（/，root）；
- 每一个目录不仅能使用本地partion的文件系统，还能使用网络上的filesystem；
- 每一个文件在此目录树中的文件名都是独一无二的；

![image-20221017205053618](/Users/berry/Library/Application Support/typora-user-images/image-20221017205053618.png)

##### 3. 绝对路径与相对路径

- 绝对路径：由根目录开启写起的文件名或目录名称；
- 相对路径：相对于目前路径的文件名写法；
- .代表当前目录，也可用./表示；
- ..代表上一层目录，也可用../表示；

##### 4. CentOS的观察

- 查看核心版本

```bash
uname -r
```

- 查看操作系统的位版本

```bash
uname -m
```

#### 三、Linux目录操作

##### 1. 特殊目录

```
.代表此层目录，..代表上一层目录，-代表前一个工作目录，～代表目前使用者身份所在的主文件夹，～[account]代表account这个使用者的主文件夹。
```

##### 2. 变换目录

- change directory，cd；

##### 3. 显示目前所在目录

- Print Working Directory，pwd；

- 加-P参数显示链接文件的完整路径；

##### 4. 创建新目录

- Make Directory，mkdir；
- -m参数设置文件权限，不加为默认权限；
- -p参数能够递回创建目录；

##### 5. 删除空目录

- Remove Directory，rmdir；
- -p参数能连同上层的空目录一起删除；

##### 6. 可执行文件路径的变量：$PATH

- 不同身份使用者默认的PATH不同，默认能够随意执行的指令也不同；
- PATH这个变量的内容由一堆目录所组成的，每个目录中间用:分隔，每个目录也有顺序之分。

#### 四、Linux文件与目录管理操作

##### 1. 文件与目录的检视

```bash
ls [-aAdfFhilnrRSt] 文件名或目录名称..
```

```
-a：显示全部文件包括隐藏文件；
-A：显示全部文件包括隐藏文件，但不包括.和..这两个目录；
-d：仅列出目录本身，而不是列出目录内的文件数据；
-f：直接列出结果，而不进行排序；
-F：根据文件、目录等信息，给予附加结构数据；
-h：将文件大小以易读方式显示；
-i：列出inode号码；
-l：长数据串行出，包含文件的属性与权限等数据；
-n：列出UID与GID而非使用者与群组的名称；
-r：将排序结果反向输出；
-R：连同子目录内容一起列出来；
-S：以文件大小排序；
-t：以时间排序；
--color=never：不依据文件特性给予颜色显示；
--color=always：显示颜色；
--color=auto：让系统自行依据设置来判断是否给予颜色；
--full-time：以完整时间模式输出；
--time={atime，ctime}：输出access时间或改变权限属性时间ctime而非内容变更时间；
```

##### 2. 复制文件或目录

```bash
cp [-adfilprsu] 来源文件（source） 目标文件（destination）
cp [options] source1 source2 source3 .... directory
```

```
-a  ：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明；（常用）；
-d  ：若来源文件为链接文件的属性（link file），则复制链接文件属性而非文件本身；
-f  ：为强制（force）的意思，若目标文件已经存在且无法打开，则移除后再尝试一次；
-i  ：若目标文件（destination）已经存在时，在覆盖时会先询问动作的进行（常用）；
-l  ：进行硬式链接（hard link）的链接文件创建，而非复制文件本身；
-p  ：连同文件的属性（权限、用户、时间）一起复制过去，而非使用默认属性（备份常用）；
-r  ：递回持续复制，用于目录的复制行为；（常用）
-s  ：复制成为符号链接文件 （symbolic link），亦即“捷径”文件；
-u  ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制。
--preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了。
如果来源文件有两个以上，则最后一个目的文件一定要是“目录”。
```

##### 3. 移除文件或目录

```bash
rm [-fir] 文件或目录
```

```
-f  ：就是 force 的意思，忽略不存在的文件，不会出现警告讯息；
-i  ：互动模式，在删除前会询问使用者是否动作
-r  ：递回删除。
```

##### 4. 移动文件与目录或更名

```bash
mv [-fiu] source destination
mv [options] source1 source2 source3 .... directory
```

```
-f  ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
-i  ：若目标文件 （destination） 已经存在时，就会询问是否覆盖！
-u  ：若目标文件已经存在，且 source 比较新，才会更新 （update）
```

##### 5. 取得路径的文件名称与路径名称

```bash
basename 文件名
dirname 文件名
```

#### 五、文件内容查询

##### 1. 直接检视文件内容

- cat（concatenate）

  ```bash
  cat [-AbEnTv] 文件名
  ```

  ```
  -A  ：相当于 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
  -b  ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
  -E  ：将结尾的断行字符 $ 显示出来；
  -n  ：打印出行号，连同空白行也会有行号，与 -b 的选项不同；
  -T  ：将 [tab] 按键以 ^I 显示出来；
  -v  ：列出一些看不出来的特殊字符
  ```

- tac（反向列示）

  ```bash
  tac 文件名
  ```

- nl（添加行号打印）

  ```bash
  nl [-bnw] 文件
  ```

  ```
  -b  ：指定行号指定的方式，主要有两种：
        -b a ：表示不论是否为空行，也同样列出行号（类似 cat -n）；
        -b t ：如果有空行，空的那一行不要列出行号（默认值）；
  -n  ：列出行号表示的方法，主要有三种：
        -n ln ：行号在屏幕的最左方显示；
        -n rn ：行号在自己字段的最右方显示，且不加 0 ；
        -n rz ：行号在自己字段的最右方显示，且加 0 ；
  -w  ：行号字段的占用的字符数。
  ```

##### 2. 可翻页检视

- more（一页一页翻动）

  ```bash
  more 文件名
  ```

  ```
  空白键 （space）：代表向下翻一页；
  Enter         ：代表向下翻“一行”；
  /字串         ：代表在这个显示的内容当中，向下搜寻“字串”这个关键字；
  :f            ：立刻显示出文件名以及目前显示的行数；
  q             ：代表立刻离开 more ，不再显示该文件内容。
  b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。
  ```

- less（一页一页翻动）

  ```bash
  less 文件名
  ```

  ```
  空白键    ：向下翻动一页；
  [pagedown]：向下翻动一页；
  [pageup]  ：向上翻动一页；
  /字串     ：向下搜寻“字串”的功能；
  ?字串     ：向上搜寻“字串”的功能；
  n         ：重复前一个搜寻 （与 / 或 ? 有关！）
  N         ：反向的重复前一个搜寻 （与 / 或 ? 有关！）
  g         ：前进到这个数据的第一行去；
  G         ：前进到这个数据的最后一行去 （注意大小写）；
  q         ：离开 less 这个程序；
  ```

##### 3. 数据撷取

- head（取出前面几行）

  ```bash
  head [-n number] 文件
  ```

  ```
  -n  ：后面接数字，代表显示几行的意思
  ```

- tail（取出后面几行）

  ```bash
  tail [-n number] 文件
  ```

  ```
  -n  ：后面接数字，代表显示几行的意思
  -f  ：表示持续侦测后面所接的文件名，要等到按下[ctrl]-c才会结束tail的侦测
  ```

##### 4. 非纯文本文件

- od

  ```bash
  od [-t TYPE] 文件
  ```

  ```
  -t  ：后面可以接各种“类型 （TYPE）”的输出，例如：
        a       ：利用默认的字符来输出；
        c       ：使用 ASCII 字符来输出
        d[size] ：利用十进制（decimal）来输出数据，每个整数占用 size Bytes ；
        f[size] ：利用浮点数值（floating）来输出数据，每个数占用 size Bytes ；
        o[size] ：利用八进位（octal）来输出数据，每个整数占用 size Bytes ；
        x[size] ：利用十六进制（hexadecimal）来输出数据，每个整数占用 size Bytes ；
  ```

##### 5. 修改文件时间或新文件

- modification time （mtime）：文件内容数据变更时会更新时间；

- status time（ctime）：文件状态（权限与属性）变更时会更新时间；

- access time（atime）：文件内容被读取时会更新时间。

  ```bash
  touch [-acdmt] 文件
  ```

  ```
  -a  ：仅修订 access time；
  -c  ：仅修改文件的时间，若该文件不存在则不创建新文件；
  -d  ：后面可以接欲修订的日期而不用目前的日期，也可以使用 --date="日期或时间"
  -m  ：仅修改 mtime ；
  -t  ：后面可以接欲修订的时间而不用目前的时间，格式为[YYYYMMDDhhmm]
  ```

  
